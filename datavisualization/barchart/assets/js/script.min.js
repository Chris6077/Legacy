var json;$(document).ready(function(){AOS.init({disable:"mobile"})}),$(document).ready(()=>{let t=new XMLHttpRequest;t.open("GET","https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/GDP-data.json",!0),t.send(),t.onload=(()=>{json=JSON.parse(t.responseText),draw()}),$(window).resize(()=>{draw()})});let draw=()=>{$(".tooltip").remove(),$("main")[0].innerHTML="";let t=50,e=50,a=30,n=70,r=document.documentElement.clientHeight/2,d=d3.timeParse("%Y-%m-%d"),o=d3.scaleTime().domain([d3.min(json.data,t=>d(t[0])),d3.max(json.data,t=>d(t[0]))]).range([0,800]),i=d3.scaleLinear().domain([0,d3.max(json.data,t=>t[1])]).range([0,r]),s=d3.scaleLinear().domain([0,d3.max(json.data,t=>t[1])]).range([r,0]),l=d3.axisLeft(s),c=d3.axisBottom(o),p=d3.select("main").append("svg").attr("width",n+800+a).attr("height",t+r+e),m=p.append("g").attr("transform",`translate(${n},${t})`),g=d3.select("body").append("div").attr("id","tooltip").attr("class","tooltip").style("opacity",0),u=p.append("text").attr("id","title").text(json.name);u.attr("x",n+400-u.node().getBoundingClientRect().width/2).attr("y",(t+u.node().getBoundingClientRect().height)/2),m.selectAll("rect").data(json.data).enter().append("rect").attr("data-date",t=>t[0]).attr("data-gdp",t=>t[1]).attr("class","bar").attr("fill","#1e6add").attr("x",t=>o(d(t[0]))).attr("y",t=>r-i(t[1])).attr("width",800/(1.5*json.data.length)).attr("height",t=>i(t[1])).on("mouseover",t=>{g.attr("data-date",t[0]).transition().duration(100).style("opacity",.9),g.html((t=>{let e="";switch(t[0].substring(5,7)){case"01":e="Q1";break;case"04":e="Q2";break;case"07":e="Q3";break;case"10":e="Q4"}return`${e} ${t[0].substring(0,4)}</br>$${d3.format(",")(t[1])} Billion`})(t)).style("left",d3.event.pageX+a/2+"px").style("top",d3.event.pageY-e+"px")}).on("mouseout",t=>{g.transition().duration(300).style("opacity",0),setTimeout(300,()=>{$(".tooltip").remove()})}),p.append("g").call(l).attr("id","y-axis").attr("transform","translate("+n+", "+t+")");let h=m.append("text").attr("id","label").attr("transform","rotate(-90)").text(json.description.match(/(units: )(.*)/i)[2]);h.attr("x",-h.node().getBoundingClientRect().height).attr("y",h.node().getBoundingClientRect().width),p.append("g").call(c).attr("id","x-axis").attr("transform","translate("+n+", "+(t+r)+")");setTimeout(()=>{$("#preloader").fadeOut(500)},500);setTimeout(()=>{$("#preloader").remove()},1100);};